---
title: TCP/IP
date: 2020-02-11 11:54:48
tags:
  - 计算机网络
---
### OSi 7层网络模型
> 为了解耦而分层。OSI的7层模型中的 `表示层和会话层` 被封装在 TCP/IP 的应用层。TCP/IP中的 `传输层，网络层，数据控制层，物理层` 都由操作系统内核实现。
### TCP特点
  - 面向连接的可靠的传输协议。
  - ，


![模型](http://blogqiniu.wangminwei.top/202002111209_27.png?/)
### 三次握手/四次挥手
> 我方应用层去调用我方传输控制层。我方传输控制层生成想要握手的第一个包`sync`。
> 对方传输控制层接收到消息后，产生`sync+ack`包，发送回我方。
> 我发 把`ack`包返回给服务器。

**序列号seq：**占4个字节，用来标记数据段的顺序，TCP把连接中发送的所有数据字节都编上一个序号，第一个字节的编号由本地随机产生；给字节编上序号后，就给每一个报文段指派一个序号；序列号seq就是这个报文段中的第一个字节的数据编号。
**确认号ack：**占4个字节，期待收到对方下一个报文段的第一个数据字节的序号；序列号表示报文段携带数据的第一个字节的编号；而确认号指的是期望接收到下一个字节的编号；因此当前报文段最后一个字节的编号+1即为确认号(仅当ACK=1时，确认号字段才有效。ACK=0时，确认号无效)
**同步SYN：**连接建立时用于同步序号。当SYN=1，ACK=0时表示：这是一个连接请求报文段。若同意连接，则在响应报文段中使得SYN=1，ACK=1。因此，SYN=1表示这是一个连接请求，或连接接受报文。SYN这个标志位只有在TCP建产连接时才会被置1，握手完成后SYN标志位被置0。

**终止FIN：** 用来释放一个连接。FIN=1表示：此报文段的发送方的数据已经发送完毕，并要求释放运输连接

![三次握手模型](http://blogqiniu.wangminwei.top/202002111332_949.png?/)

![四次挥手模型](http://blogqiniu.wangminwei.top/202002111331_376.png?/)

![](http://blogqiniu.wangminwei.top/202002111335_985.png?/)

![](http://blogqiniu.wangminwei.top/202002111337_197.png?/)

### 网络层
